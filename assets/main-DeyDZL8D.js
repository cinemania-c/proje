import{a as q}from"./vendor-DGDcxXwr.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("genre-dropdown-container"),t=document.getElementById("load-more-container"),n=document.getElementById("library-list"),o=document.getElementById("default-content"),r=document.getElementById("genre-dropdown"),a=10;let u=1;const i=JSON.parse(localStorage.getItem("myLibrary"))||[];if(i.length===0){o.style.display="block",e.style.display="none",t.style.display="none";return}o.style.display="none",e.style.display="block",I(i.slice(0,a)),i.length>a?t.style.display="block":t.style.display="none",r.addEventListener("change",c=>{const p=c.target.value,v=p==="all"?i.slice(0,u*a):i.filter(s=>s.genre_ids.includes(parseInt(p)));v.length===0?(o.style.display="block",n.innerHTML="",e.style.display="block",t.style.display="none"):(o.style.display="none",I(v.slice(0,u*a)),t.style.display=v.length>u*a?"block":"none")}),document.getElementById("load-more").addEventListener("click",()=>{u++;const c=i.slice(0,u*a);I(c),c.length>=i.length&&(t.style.display="none")})});function I(e){const t=document.getElementById("library-list");t.innerHTML="",e.forEach(n=>{const o=document.createElement("div");o.className="movie-item",o.innerHTML=`
          <img src="https://image.tmdb.org/t/p/w500${n.poster_path}" alt="${n.title}" class="movie-poster">
          <div class="catalog-card-info-container">
            <h3 class="catalog-card-title">${n.title}</h3>
            <p class="catalog-card-description">${Y(n.genre_ids)} | ${n.release_date?n.release_date.split("-")[0]:"Unknown"}</p>
            <p class="rating">⭐ ${n.vote_average.toFixed(1)}</p>
          </div>
        `,o.addEventListener("click",()=>{window.movieModal.show(n.id)}),t.appendChild(o)})}function Y(e){const t={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};return!e||!Array.isArray(e)?"":e.map(o=>t[o]||"Unknown").slice(0,2).join(", ")}const K="016a30ce49a7789188b6fa9bad9963a6",j="https://api.themoviedb.org/3",k="https://image.tmdb.org/t/p",z={TRENDING_WEEK:"/trending/movie/week",TRENDING_DAY:"/trending/movie/day",POPULAR_MOVIES:"/movie/popular",UPCOMING_MOVIES:"/movie/upcoming",MOVIE_DETAILS:e=>`/movie/${e}`,MOVIE_VIDEOS:e=>`/movie/${e}/videos`,SEARCH_MOVIES:"/search/movie",GENRE_LIST:"/genre/movie/list",IMG_W500:"/w500",IMG_W780:"/w780",IMG_W1280:"/w1280",IMG_ORIGINAL:"/original"};async function J(e,t,n={}){try{return(await q.get(`${e}${t}`,{params:{api_key:K,language:"en-US",page:1,...n}})).data}catch(o){throw console.error("Error fetching data:",o),o}}const Q=document.querySelector("#weekly-movie-card"),X="https://api.themoviedb.org/3",Z="https://image.tmdb.org/t/p",ee="9d898ad8ed36e30a2f478f382f12d8e2",te={TRENDING_WEEK:"/trending/movie/week"},ne={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};function oe(e){return!e||!Array.isArray(e)?"":e.map(n=>ne[n]||"Unknown").slice(0,2).join(", ")}function re(e){return e?e.split("-")[0]:""}async function ae(e,t){const n=`${e}${t}?api_key=${ee}&language=en-US`,o=await fetch(n);if(!o.ok)throw new Error("API fetch failed");return await o.json()}async function se(){try{const t=(await ae(X,te.TRENDING_WEEK)).results.slice(0,3),n=t.map(o=>{const r=oe(o.genre_ids),a=re(o.release_date),u=`${r}${a?` | ${a}`:""}`,i=o.poster_path?`${Z}/w500${o.poster_path}`:"https://via.placeholder.com/500x750?text=No+Image";return`
        <li class="catalog-item" id="weekly-movie-${o.id}">
          <img class="catalog-img" src="${i}" alt="${o.title}">
          <div class="catalog-card-info-container weekly-font">
            <h2 class="weekly-card-title">${o.title}</h2>
            <p class="weekly-card-text">${u}</p>
            <p class="weekly-card-rating">⭐ ${o.vote_average.toFixed(1)}</p>
          </div>
        </li>
      `});Q.innerHTML=n.join(""),t.forEach(o=>{document.getElementById(`weekly-movie-${o.id}`).addEventListener("click",()=>{var a;(a=window.movieModal)==null||a.show(o.id)})})}catch(e){console.error("Hata:",e)}}se();document.addEventListener("DOMContentLoaded",()=>{function t(r){function a(){window.scrollY>100?r.classList.add("visible"):r.classList.remove("visible")}function u(){window.scrollTo({top:0,behavior:"smooth"})}window.addEventListener("scroll",a),r.addEventListener("click",u),a()}function n(){const r=new MutationObserver(()=>{const a=document.querySelector(".scroll-to-top");a&&(r.disconnect(),t(a))});r.observe(document.body,{childList:!0,subtree:!0})}const o=document.querySelector(".scroll-to-top");o?t(o):(console.warn("scroll-to-top butonu bulunamadı. DOM gözlemleniyor..."),n())});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".modal-details");if(!e)return;const t=e.querySelector(".modal-details__close"),n=e.querySelector(".modal-details__library-btn");let o=null;const r={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};function a(){e.classList.remove("active"),document.body.style.overflow="auto"}t==null||t.addEventListener("click",a),e.addEventListener("click",s=>{s.target===e&&a()}),document.addEventListener("keydown",s=>{s.key==="Escape"&&e.classList.contains("active")&&a()});function u(s){return(JSON.parse(localStorage.getItem("myLibrary"))||[]).some(y=>y.id===s)}function i(s){const l=u(s);n&&(n.textContent=l?"Remove from my library":"Add to my library",n.dataset.action=l?"remove":"add")}function c(s){const l=JSON.parse(localStorage.getItem("myLibrary"))||[],y=l.findIndex(m=>m.id===s.id);s.genres&&!s.genre_ids&&(s.genre_ids=s.genres.map(m=>m.id)),s.genre_ids&&!s.genres&&(s.genres=s.genre_ids.map(m=>({id:m,name:r[m]||"Unknown"}))),y===-1?l.push(s):l.splice(y,1),localStorage.setItem("myLibrary",JSON.stringify(l)),i(s.id)}n==null||n.addEventListener("click",async()=>{if(o){const s=await p(o);c(s)}});async function p(s){const l="016a30ce49a7789188b6fa9bad9963a6",y="https://api.themoviedb.org/3";try{const m=await fetch(`${y}/movie/${s}?api_key=${l}&language=en-US`);if(!m.ok)throw new Error("Failed to fetch movie details");return await m.json()}catch(m){return console.error("Error fetching movie details:",m),null}}async function v(s){const l=await p(s);if(!l)return;o=l.id;const y=e.querySelector(".modal-details__image");y&&(y.src=`https://image.tmdb.org/t/p/w500${l.poster_path}`,y.alt=l.title),e.querySelector(".modal-details__title").textContent=l.title,e.querySelector(".modal-details__vote").textContent=l.vote_average.toFixed(1),e.querySelector(".modal-details__votes").textContent=l.vote_count,e.querySelector(".modal-details__popularity").textContent=l.popularity.toFixed(1),e.querySelector(".modal-details__genre").textContent=l.genres.map(m=>m.name).join(", "),e.querySelector(".modal-details__about-text").textContent=l.overview,i(l.id),e.classList.add("active"),document.body.style.overflow="hidden"}window.movieModal={show:v,close:a}});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".hero-summary"),t=document.querySelector(".hero-button-moreDetails");document.querySelector(".hero-button-watchTrailer");const n=document.querySelector(".hero"),o=document.querySelector(".hero-image-container"),r=document.querySelector(".hero"),a=document.querySelector(".hero-h1"),u=document.querySelector(".hero-rating-stars");let i=null,c=null,p;function v(d){return d.length>170?d.slice(0,170)+"...":d}function s(d){const f=`${k}/w500${d.backdrop_path}`,w=`${k}/w780${d.backdrop_path}`,M=`${k}/w1280${d.backdrop_path}`;p=document.createElement("img"),p.classList.add("hero-image-itself"),p.alt=d.title,window.innerWidth<=767?p.src=f:window.innerWidth<=1279?p.src=w:p.src=M,o.innerHTML="",o.appendChild(p),r.setAttribute("aria-label",d.title),a.textContent=d.title,e.textContent=v(d.overview),i=d.id}const l="<svg>...FULL STAR...</svg>",y="<svg>...HALF STAR...</svg>",m="<svg>...EMPTY STAR...</svg>";function W(d,f){if(d<=0||d>=10){console.error("Rating must be between 0 and 10");return}const w=d/2;f.innerHTML="";const M=Math.floor(w),O=w%1>=.5?1:0,V=5-M-O;for(let h=0;h<M;h++){const L=document.createElement("div");L.innerHTML=l,f.appendChild(L.firstElementChild)}if(O){const h=document.createElement("div");h.innerHTML=y,f.appendChild(h.firstElementChild)}for(let h=0;h<V;h++){const L=document.createElement("div");L.innerHTML=m,f.appendChild(L.firstElementChild)}}J(j,z.POPULAR_MOVIES,{page:1}).then(d=>{if(d.results&&d.results.length>0){const f=Math.floor(Math.random()*d.results.length);c=d.results[f],n.dataset.movieid=c.id,W(c.vote_average,u),s(c)}else console.error("No movies found for hero section.")}),t.addEventListener("click",()=>{if(!window.movieModal||typeof window.movieModal.show!="function"){console.warn("Modal sistemi henüz hazır değil.");return}i&&window.movieModal.show(i)}),window.addEventListener("resize",()=>{p&&c&&s(c)})});const ie="016a30ce49a7789188b6fa9bad9963a6",ce="https://api.themoviedb.org/3",P=document.getElementById("paginationNumbers"),S=document.getElementById("prevButton"),_=document.getElementById("nextButton"),R=document.getElementById("movie-list"),A=document.querySelector(".error-message");let E=1,b=1,le="";const de={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};function ue(e){return!e||!Array.isArray(e)?"":e.map(o=>de[o]||"Unknown").slice(0,2).join(", ")}function me(e){return e?e.split("-")[0]:""}function pe(){B(1),S.addEventListener("click",()=>C(E-1)),_.addEventListener("click",()=>C(E+1))}async function B(e){try{const t=await ye(e,le);ge(t.results),E=t.page,b=t.total_pages,fe()}catch(t){console.error("Failed to load movies:",t),G("Failed to load movies. Please try again.")}}async function ye(e,t){try{let n="/trending/movie/week",o={api_key:ie,page:e};return(await q.get(`${ce}${n}`,{params:o})).data}catch(n){throw console.error("Error fetching movies:",n),n}}function ge(e){if(R.innerHTML="",A.style.display="none",!e||e.length===0){G("No movies found.");return}e.forEach(t=>{const n=document.createElement("div");n.className="catalog-item",n.style.backgroundImage=`url(https://image.tmdb.org/t/p/w500${t.poster_path})`;const o=ue(t.genre_ids),r=me(t.release_date),a=`${o}${r?` | ${r}`:""}`;n.innerHTML=`
      <div class="catalog-card-info-container">
        <h3 class="catalog-card-title">${t.title}</h3>
        <p class="catalog-card-description">${a}</p>
        <p class="rating">⭐ ${t.vote_average.toFixed(1)}</p>
      </div>
    `,R.appendChild(n),n.addEventListener("click",()=>{window.movieModal.show(t.id)})})}function fe(){if(P.innerHTML="",b<2){S.style.display="none",_.style.display="none";return}else S.style.display="inline-block",_.style.display="inline-block";const e=Math.max(1,E-2),t=Math.min(b,e+5);for(let n=e;n<=t;n++){const o=document.createElement("button");o.textContent=n,o.classList.add("pagination-button"),n===E&&o.classList.add("active"),o.addEventListener("click",()=>C(n)),P.appendChild(o)}S.disabled=E===1,_.disabled=E===b}function G(e){A.textContent=e,A.style.display="block"}async function C(e){e>=1&&e<=b&&await B(e)}const he="9d898ad8ed36e30a2f478f382f12d8e2",ve="https://api.themoviedb.org/3",Ee="https://image.tmdb.org/t/p",x={TRENDING_WEEK:"/trending/movie/week",SEARCH_MOVIES:"/search/movie",IMG_W500:"/w500"},Le=document.getElementById("search-form"),$=document.getElementById("search-input"),T=document.getElementById("clear-button"),H=document.getElementById("year-select"),N=document.getElementById("movie-list"),g=document.querySelector(".error-message"),be={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};function we(e){return Array.isArray(e)?e.map(n=>be[n]||"Unknown").slice(0,2).join(", "):""}function D(e){return e?e.split("-")[0]:""}function F(e){N.innerHTML="",e.forEach(t=>{const n=document.createElement("div");n.className="catalog-item",n.id=`movie-${t.id}`;const o=t.poster_path?`${Ee}${x.IMG_W500}${t.poster_path}`:"https://via.placeholder.com/500x750?text=No+Image";console.log("Poster URL:",o),n.innerHTML=`
      <img src="${o}" alt="${t.title}" class="catalog-img" />
      <div class="catalog-card-info-container">
        <h3 class="catalog-card-title">${t.title}</h3>
        <p class="catalog-card-description">${we(t.genre_ids)}${D(t.release_date)?` | ${D(t.release_date)}`:""}</p>
        <p class="rating">⭐ ${t.vote_average.toFixed(1)}</p>
      </div>
    `,n.addEventListener("click",()=>{var r;(r=window.movieModal)==null||r.show(t.id)}),N.appendChild(n)})}async function U(e,t={}){const n=new URL(ve+e);n.searchParams.append("api_key",he),n.searchParams.append("language","en-US"),n.searchParams.append("page",1),Object.entries(t).forEach(([r,a])=>n.searchParams.append(r,a));const o=await fetch(n);if(!o.ok)throw new Error("API request failed");return o.json()}async function Me(){var e;try{const t=await U(x.TRENDING_WEEK);((e=t.results)==null?void 0:e.length)>0?(F(t.results),g.style.display="none"):(g.textContent="No trending movies found.",g.style.display="block")}catch(t){console.error(t),g.textContent="Failed to load trending movies.",g.style.display="block"}}function Se(){const e=new Date().getFullYear();for(let t=e;t>=1960;t--){const n=document.createElement("option");n.value=t,n.textContent=t,H.appendChild(n)}}$.addEventListener("input",()=>{T.style.display=$.value.trim()?"inline-block":"none"});T.addEventListener("click",()=>{$.value="",T.style.display="none"});Le.addEventListener("submit",async e=>{var o;e.preventDefault();const t=$.value.trim(),n=H.value;if(t)try{const r=await U(x.SEARCH_MOVIES,{query:t,primary_release_year:n});((o=r.results)==null?void 0:o.length)>0?(F(r.results),g.style.display="none"):(N.innerHTML="",g.textContent=`  OOPS!        We are unable to load trending movies. Please try again later.
`,g.style.display="block")}catch(r){console.error(r),g.textContent="Search failed. Please try again.",g.style.display="block"}});document.addEventListener("DOMContentLoaded",()=>{pe(),Se(),Me()});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".mobile-menu-btn"),t=document.querySelector(".mobile-menu"),n=document.querySelector(".mobile-menu-icon use"),o=document.body;function r(){const i=t.classList.contains("is-open"),c=n.getAttribute("href").split("#")[0];t.classList.toggle("is-open"),e.setAttribute("aria-expanded",!i),n.setAttribute("href",i?c+"#icon-menu":c+"#icon-close"),o.style.overflow=i?"":"hidden"}e&&t&&(e.addEventListener("click",c=>{c.stopPropagation(),r()}),document.querySelectorAll(".mobile-nav-link").forEach(c=>{c.addEventListener("click",()=>{r()})}),document.addEventListener("click",c=>{t.classList.contains("is-open")&&!c.target.closest(".mobile-menu")&&!c.target.closest(".mobile-menu-btn")&&r()}),t.addEventListener("click",c=>{c.stopPropagation()}),document.addEventListener("keydown",c=>{c.key==="Escape"&&t.classList.contains("is-open")&&r()}));const a=window.location.pathname;document.querySelectorAll(".nav-link, .mobile-nav-link").forEach(i=>{i.classList.remove("active")}),a.includes("catalog.html")?document.querySelectorAll('[data-page="catalog"]').forEach(i=>{i.classList.add("active")}):a.includes("mylibrary.html")?document.querySelectorAll('[data-page="library"]').forEach(i=>{i.classList.add("active")}):document.querySelectorAll('[data-page="home"]').forEach(i=>{i.classList.add("active")})});
//# sourceMappingURL=main-DeyDZL8D.js.map
