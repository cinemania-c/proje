import{a as R}from"./vendor-DGDcxXwr.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("genre-dropdown-container"),t=document.getElementById("load-more-container"),n=document.getElementById("library-list"),o=document.getElementById("default-content"),r=document.getElementById("genre-dropdown"),a=10;let d=1;const i=JSON.parse(localStorage.getItem("myLibrary"))||[];if(i.length===0){o.style.display="block",e.style.display="none",t.style.display="none";return}o.style.display="none",e.style.display="block",$(i.slice(0,a)),i.length>a?t.style.display="block":t.style.display="none",r.addEventListener("change",s=>{const m=s.target.value,y=m==="all"?i.slice(0,d*a):i.filter(c=>c.genre_ids.includes(parseInt(m)));y.length===0?(o.style.display="block",n.innerHTML="",e.style.display="block",t.style.display="none"):(o.style.display="none",$(y.slice(0,d*a)),t.style.display=y.length>d*a?"block":"none")}),document.getElementById("load-more").addEventListener("click",()=>{d++;const s=i.slice(0,d*a);$(s),s.length>=i.length&&(t.style.display="none")})});function $(e){const t=document.getElementById("library-list");t.innerHTML="",e.forEach(n=>{const o=document.createElement("div");o.className="movie-item",o.innerHTML=`
          <img src="https://image.tmdb.org/t/p/w500${n.poster_path}" alt="${n.title}" class="movie-poster">
          <div class="catalog-card-info-container">
            <h3 class="catalog-card-title">${n.title}</h3>
            <p class="catalog-card-description">${j(n.genre_ids)} | ${n.release_date?n.release_date.split("-")[0]:"Unknown"}</p>
            <p class="rating">⭐ ${n.vote_average.toFixed(1)}</p>
          </div>
        `,o.addEventListener("click",()=>{window.movieModal.show(n.id)}),t.appendChild(o)})}function j(e){const t={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};return!e||!Array.isArray(e)?"":e.map(o=>t[o]||"Unknown").slice(0,2).join(", ")}const z="016a30ce49a7789188b6fa9bad9963a6",B="https://api.themoviedb.org/3",I="https://image.tmdb.org/t/p",J={TRENDING_WEEK:"/trending/movie/week",TRENDING_DAY:"/trending/movie/day",POPULAR_MOVIES:"/movie/popular",UPCOMING_MOVIES:"/movie/upcoming",MOVIE_DETAILS:e=>`/movie/${e}`,MOVIE_VIDEOS:e=>`/movie/${e}/videos`,SEARCH_MOVIES:"/search/movie",GENRE_LIST:"/genre/movie/list",IMG_W500:"/w500",IMG_W780:"/w780",IMG_W1280:"/w1280",IMG_ORIGINAL:"/original"};async function G(e,t,n={}){try{return(await R.get(`${e}${t}`,{params:{api_key:z,language:"en-US",page:1,...n}})).data}catch(o){throw console.error("Error fetching data:",o),o}}const Q=document.querySelector("#weekly-movie-card"),X="https://api.themoviedb.org/3",Z="https://image.tmdb.org/t/p",ee="9d898ad8ed36e30a2f478f382f12d8e2",te={TRENDING_WEEK:"/trending/movie/week"},ne={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};function oe(e){return!e||!Array.isArray(e)?"":e.map(n=>ne[n]||"Unknown").slice(0,2).join(", ")}function re(e){return e?e.split("-")[0]:""}async function ae(e,t){const n=`${e}${t}?api_key=${ee}&language=en-US`,o=await fetch(n);if(!o.ok)throw new Error("API fetch failed");return await o.json()}async function se(){try{const t=(await ae(X,te.TRENDING_WEEK)).results.slice(0,3),n=t.map(o=>{const r=oe(o.genre_ids),a=re(o.release_date),d=`${r}${a?` | ${a}`:""}`,i=o.poster_path?`${Z}/w500${o.poster_path}`:"https://via.placeholder.com/500x750?text=No+Image";return`
        <li class="catalog-item" id="weekly-movie-${o.id}">
          <img class="catalog-img" src="${i}" alt="${o.title}">
          <div class="catalog-card-info-container weekly-font">
            <h2 class="weekly-card-title">${o.title}</h2>
            <p class="weekly-card-text">${d}</p>
            <p class="weekly-card-rating">⭐ ${o.vote_average.toFixed(1)}</p>
          </div>
        </li>
      `});Q.innerHTML=n.join(""),t.forEach(o=>{document.getElementById(`weekly-movie-${o.id}`).addEventListener("click",()=>{var a;(a=window.movieModal)==null||a.show(o.id)})})}catch(e){console.error("Hata:",e)}}se();document.addEventListener("DOMContentLoaded",()=>{function t(r){function a(){window.scrollY>100?r.classList.add("visible"):r.classList.remove("visible")}function d(){window.scrollTo({top:0,behavior:"smooth"})}window.addEventListener("scroll",a),r.addEventListener("click",d),a()}function n(){const r=new MutationObserver(()=>{const a=document.querySelector(".scroll-to-top");a&&(r.disconnect(),t(a))});r.observe(document.body,{childList:!0,subtree:!0})}const o=document.querySelector(".scroll-to-top");o?t(o):(console.warn("scroll-to-top butonu bulunamadı. DOM gözlemleniyor..."),n())});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".modal-details");if(!e)return;const t=e.querySelector(".modal-details__close"),n=e.querySelector(".modal-details__library-btn");let o=null;const r={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};function a(){e.classList.remove("active"),document.body.style.overflow="auto"}t==null||t.addEventListener("click",a),e.addEventListener("click",c=>{c.target===e&&a()}),document.addEventListener("keydown",c=>{c.key==="Escape"&&e.classList.contains("active")&&a()});function d(c){return(JSON.parse(localStorage.getItem("myLibrary"))||[]).some(g=>g.id===c)}function i(c){const l=d(c);n&&(n.textContent=l?"Remove from my library":"Add to my library",n.dataset.action=l?"remove":"add")}function s(c){const l=JSON.parse(localStorage.getItem("myLibrary"))||[],g=l.findIndex(p=>p.id===c.id);c.genres&&!c.genre_ids&&(c.genre_ids=c.genres.map(p=>p.id)),c.genre_ids&&!c.genres&&(c.genres=c.genre_ids.map(p=>({id:p,name:r[p]||"Unknown"}))),g===-1?l.push(c):l.splice(g,1),localStorage.setItem("myLibrary",JSON.stringify(l)),i(c.id)}n==null||n.addEventListener("click",async()=>{if(o){const c=await m(o);s(c)}});async function m(c){const l="016a30ce49a7789188b6fa9bad9963a6",g="https://api.themoviedb.org/3";try{const p=await fetch(`${g}/movie/${c}?api_key=${l}&language=en-US`);if(!p.ok)throw new Error("Failed to fetch movie details");return await p.json()}catch(p){return console.error("Error fetching movie details:",p),null}}async function y(c){const l=await m(c);if(!l)return;o=l.id;const g=e.querySelector(".modal-details__image");g&&(g.src=`https://image.tmdb.org/t/p/w500${l.poster_path}`,g.alt=l.title),e.querySelector(".modal-details__title").textContent=l.title,e.querySelector(".modal-details__vote").textContent=l.vote_average.toFixed(1),e.querySelector(".modal-details__votes").textContent=l.vote_count,e.querySelector(".modal-details__popularity").textContent=l.popularity.toFixed(1),e.querySelector(".modal-details__genre").textContent=l.genres.map(p=>p.name).join(", "),e.querySelector(".modal-details__about-text").textContent=l.overview,i(l.id),e.classList.add("active"),document.body.style.overflow="hidden"}window.movieModal={show:y,close:a}});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".hero"),t=document.querySelector(".modal-trailer"),n=t.querySelector(".modal-trailer__close"),o=document.querySelector(".hero-button-watchTrailer"),r=t.querySelector(".modal-trailer__video");function a(){const s=r.src;r.src=s}function d(){console.log("Closing modal"),t.classList.remove("active"),document.body.style.overflow="auto",a()}function i(){console.log("Opening modal"),t.classList.add("active"),document.body.style.overflow="hidden",console.log("video api ",e.dataset.movieid),G(B,`/movie/${e.dataset.movieid}/videos`,{page:1}).then(s=>{console.log("VIDEO:",s);const m=s.results.find(y=>y.official===!0&&y.site==="YouTube"&&y.type==="Trailer");if(m){const y=`https://www.youtube.com/embed/${m.key}`;console.log(r.src),r.src=y,console.log(r.src)}else console.log("No official YouTube trailer found.")})}o&&o.addEventListener("click",s=>{console.log("Watch trailer button clicked"),s.preventDefault(),i()}),n&&n.addEventListener("click",s=>{console.log("Close button clicked"),s.preventDefault(),d()}),t&&t.addEventListener("click",s=>{s.target===t&&(console.log("Clicked outside modal"),d())}),document.addEventListener("keydown",s=>{s.key==="Escape"&&t.classList.contains("active")&&(console.log("Escape key pressed"),d())}),window.trailerModal={open:i,close:d}});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".hero-summary"),t=document.querySelector(".hero-button-moreDetails");document.querySelector(".hero-button-watchTrailer");const n=document.querySelector(".hero"),o=document.querySelector(".hero-image-container"),r=document.querySelector(".hero"),a=document.querySelector(".hero-h1"),d=document.querySelector(".hero-rating-stars");let i=null,s=null,m;function y(u){return u.length>170?u.slice(0,170)+"...":u}function c(u){const h=`${I}/w500${u.backdrop_path}`,w=`${I}/w780${u.backdrop_path}`,M=`${I}/w1280${u.backdrop_path}`;m=document.createElement("img"),m.classList.add("hero-image-itself"),m.alt=u.title,window.innerWidth<=767?m.src=h:window.innerWidth<=1279?m.src=w:m.src=M,o.innerHTML="",o.appendChild(m),r.setAttribute("aria-label",u.title),a.textContent=u.title,e.textContent=y(u.overview),i=u.id}const l="<svg>...FULL STAR...</svg>",g="<svg>...HALF STAR...</svg>",p="<svg>...EMPTY STAR...</svg>";function Y(u,h){if(u<=0||u>=10){console.error("Rating must be between 0 and 10");return}const w=u/2;h.innerHTML="";const M=Math.floor(w),D=w%1>=.5?1:0,K=5-M-D;for(let v=0;v<M;v++){const L=document.createElement("div");L.innerHTML=l,h.appendChild(L.firstElementChild)}if(D){const v=document.createElement("div");v.innerHTML=g,h.appendChild(v.firstElementChild)}for(let v=0;v<K;v++){const L=document.createElement("div");L.innerHTML=p,h.appendChild(L.firstElementChild)}}G(B,J.POPULAR_MOVIES,{page:1}).then(u=>{if(u.results&&u.results.length>0){const h=Math.floor(Math.random()*u.results.length);s=u.results[h],n.dataset.movieid=s.id,Y(s.vote_average,d),c(s)}else console.error("No movies found for hero section.")}),t.addEventListener("click",()=>{if(!window.movieModal||typeof window.movieModal.show!="function"){console.warn("Modal sistemi henüz hazır değil.");return}i&&window.movieModal.show(i)}),window.addEventListener("resize",()=>{m&&s&&c(s)})});const ie="016a30ce49a7789188b6fa9bad9963a6",ce="https://api.themoviedb.org/3",q=document.getElementById("paginationNumbers"),S=document.getElementById("prevButton"),_=document.getElementById("nextButton"),x=document.getElementById("movie-list"),A=document.querySelector(".error-message");let E=1,b=1,le="";const de={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};function ue(e){return!e||!Array.isArray(e)?"":e.map(o=>de[o]||"Unknown").slice(0,2).join(", ")}function me(e){return e?e.split("-")[0]:""}function pe(){H(1),S.addEventListener("click",()=>T(E-1)),_.addEventListener("click",()=>T(E+1))}async function H(e){try{const t=await ye(e,le);ge(t.results),E=t.page,b=t.total_pages,fe()}catch(t){console.error("Failed to load movies:",t),F("Failed to load movies. Please try again.")}}async function ye(e,t){try{let n="/trending/movie/week",o={api_key:ie,page:e};return(await R.get(`${ce}${n}`,{params:o})).data}catch(n){throw console.error("Error fetching movies:",n),n}}function ge(e){if(x.innerHTML="",A.style.display="none",!e||e.length===0){F("No movies found.");return}e.forEach(t=>{const n=document.createElement("div");n.className="catalog-item",n.style.backgroundImage=`url(https://image.tmdb.org/t/p/w500${t.poster_path})`;const o=ue(t.genre_ids),r=me(t.release_date),a=`${o}${r?` | ${r}`:""}`;n.innerHTML=`
      <div class="catalog-card-info-container">
        <h3 class="catalog-card-title">${t.title}</h3>
        <p class="catalog-card-description">${a}</p>
        <p class="rating">⭐ ${t.vote_average.toFixed(1)}</p>
      </div>
    `,x.appendChild(n),n.addEventListener("click",()=>{window.movieModal.show(t.id)})})}function fe(){if(q.innerHTML="",b<2){S.style.display="none",_.style.display="none";return}else S.style.display="inline-block",_.style.display="inline-block";const e=Math.max(1,E-2),t=Math.min(b,e+5);for(let n=e;n<=t;n++){const o=document.createElement("button");o.textContent=n,o.classList.add("pagination-button"),n===E&&o.classList.add("active"),o.addEventListener("click",()=>T(n)),q.appendChild(o)}S.disabled=E===1,_.disabled=E===b}function F(e){A.textContent=e,A.style.display="block"}async function T(e){e>=1&&e<=b&&await H(e)}const he="9d898ad8ed36e30a2f478f382f12d8e2",ve="https://api.themoviedb.org/3",Ee="https://image.tmdb.org/t/p",O={TRENDING_WEEK:"/trending/movie/week",SEARCH_MOVIES:"/search/movie",IMG_W500:"/w500"},Le=document.getElementById("search-form"),k=document.getElementById("search-input"),C=document.getElementById("clear-button"),U=document.getElementById("year-select"),N=document.getElementById("movie-list"),f=document.querySelector(".error-message"),be={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};function we(e){return Array.isArray(e)?e.map(n=>be[n]||"Unknown").slice(0,2).join(", "):""}function P(e){return e?e.split("-")[0]:""}function W(e){N.innerHTML="",e.forEach(t=>{const n=document.createElement("div");n.className="catalog-item",n.id=`movie-${t.id}`;const o=t.poster_path?`${Ee}${O.IMG_W500}${t.poster_path}`:"https://via.placeholder.com/500x750?text=No+Image";console.log("Poster URL:",o),n.innerHTML=`
      <img src="${o}" alt="${t.title}" class="catalog-img" />
      <div class="catalog-card-info-container">
        <h3 class="catalog-card-title">${t.title}</h3>
        <p class="catalog-card-description">${we(t.genre_ids)}${P(t.release_date)?` | ${P(t.release_date)}`:""}</p>
        <p class="rating">⭐ ${t.vote_average.toFixed(1)}</p>
      </div>
    `,n.addEventListener("click",()=>{var r;(r=window.movieModal)==null||r.show(t.id)}),N.appendChild(n)})}async function V(e,t={}){const n=new URL(ve+e);n.searchParams.append("api_key",he),n.searchParams.append("language","en-US"),n.searchParams.append("page",1),Object.entries(t).forEach(([r,a])=>n.searchParams.append(r,a));const o=await fetch(n);if(!o.ok)throw new Error("API request failed");return o.json()}async function Me(){var e;try{const t=await V(O.TRENDING_WEEK);((e=t.results)==null?void 0:e.length)>0?(W(t.results),f.style.display="none"):(f.textContent="No trending movies found.",f.style.display="block")}catch(t){console.error(t),f.textContent="Failed to load trending movies.",f.style.display="block"}}function Se(){const e=new Date().getFullYear();for(let t=e;t>=1960;t--){const n=document.createElement("option");n.value=t,n.textContent=t,U.appendChild(n)}}k.addEventListener("input",()=>{C.style.display=k.value.trim()?"inline-block":"none"});C.addEventListener("click",()=>{k.value="",C.style.display="none"});Le.addEventListener("submit",async e=>{var o;e.preventDefault();const t=k.value.trim(),n=U.value;if(t)try{const r=await V(O.SEARCH_MOVIES,{query:t,primary_release_year:n});((o=r.results)==null?void 0:o.length)>0?(W(r.results),f.style.display="none"):(N.innerHTML="",f.textContent=`  OOPS!        We are unable to load trending movies. Please try again later.
`,f.style.display="block")}catch(r){console.error(r),f.textContent="Search failed. Please try again.",f.style.display="block"}});document.addEventListener("DOMContentLoaded",()=>{pe(),Se(),Me()});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".mobile-menu-btn"),t=document.querySelector(".mobile-menu"),n=document.querySelector(".mobile-menu-icon use"),o=document.body;function r(){const i=t.classList.contains("is-open"),s=n.getAttribute("href").split("#")[0];t.classList.toggle("is-open"),e.setAttribute("aria-expanded",!i),n.setAttribute("href",i?s+"#icon-menu":s+"#icon-close"),o.style.overflow=i?"":"hidden"}e&&t&&(e.addEventListener("click",s=>{s.stopPropagation(),r()}),document.querySelectorAll(".mobile-nav-link").forEach(s=>{s.addEventListener("click",()=>{r()})}),document.addEventListener("click",s=>{t.classList.contains("is-open")&&!s.target.closest(".mobile-menu")&&!s.target.closest(".mobile-menu-btn")&&r()}),t.addEventListener("click",s=>{s.stopPropagation()}),document.addEventListener("keydown",s=>{s.key==="Escape"&&t.classList.contains("is-open")&&r()}));const a=window.location.pathname;document.querySelectorAll(".nav-link, .mobile-nav-link").forEach(i=>{i.classList.remove("active")}),a.includes("catalog.html")?document.querySelectorAll('[data-page="catalog"]').forEach(i=>{i.classList.add("active")}):a.includes("mylibrary.html")?document.querySelectorAll('[data-page="library"]').forEach(i=>{i.classList.add("active")}):document.querySelectorAll('[data-page="home"]').forEach(i=>{i.classList.add("active")})});
//# sourceMappingURL=main-BVv0sZAg.js.map
