import{a as R}from"./vendor-DGDcxXwr.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".mobile-menu-btn"),e=document.querySelector(".mobile-menu"),n=document.querySelector(".mobile-menu-icon use"),o=document.body;function r(){const i=e.classList.contains("is-open"),s=n.getAttribute("href").split("#")[0];e.classList.toggle("is-open"),t.setAttribute("aria-expanded",!i),n.setAttribute("href",i?s+"#icon-menu":s+"#icon-close"),o.style.overflow=i?"":"hidden"}t&&e&&(t.addEventListener("click",s=>{s.stopPropagation(),r()}),document.querySelectorAll(".mobile-nav-link").forEach(s=>{s.addEventListener("click",()=>{r()})}),document.addEventListener("click",s=>{e.classList.contains("is-open")&&!s.target.closest(".mobile-menu")&&!s.target.closest(".mobile-menu-btn")&&r()}),e.addEventListener("click",s=>{s.stopPropagation()}),document.addEventListener("keydown",s=>{s.key==="Escape"&&e.classList.contains("is-open")&&r()}));const a=window.location.pathname;document.querySelectorAll(".nav-link, .mobile-nav-link").forEach(i=>{i.classList.remove("active")}),a.includes("catalog.html")?document.querySelectorAll('[data-page="catalog"]').forEach(i=>{i.classList.add("active")}):a.includes("mylibrary.html")?document.querySelectorAll('[data-page="library"]').forEach(i=>{i.classList.add("active")}):document.querySelectorAll('[data-page="home"]').forEach(i=>{i.classList.add("active")})});document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("genre-dropdown-container"),e=document.getElementById("load-more-container"),n=document.getElementById("library-list"),o=document.getElementById("default-content"),r=document.getElementById("genre-dropdown"),a=10;let d=1;const i=JSON.parse(localStorage.getItem("myLibrary"))||[];if(i.length===0){o.style.display="block",t.style.display="none",e.style.display="none";return}o.style.display="none",t.style.display="block",I(i.slice(0,a)),i.length>a?e.style.display="block":e.style.display="none",r.addEventListener("change",s=>{const u=s.target.value,p=u==="all"?i.slice(0,d*a):i.filter(c=>c.genre_ids.includes(parseInt(u)));p.length===0?(o.style.display="block",n.innerHTML="",t.style.display="block",e.style.display="none"):(o.style.display="none",I(p.slice(0,d*a)),e.style.display=p.length>d*a?"block":"none")}),document.getElementById("load-more").addEventListener("click",()=>{d++;const s=i.slice(0,d*a);I(s),s.length>=i.length&&(e.style.display="none")})});function I(t){const e=document.getElementById("library-list");e.innerHTML="",t.forEach(n=>{const o=document.createElement("div");o.className="movie-item",o.innerHTML=`
          <img src="https://image.tmdb.org/t/p/w500${n.poster_path}" alt="${n.title}" class="movie-poster">
          <div class="catalog-card-info-container">
            <h3 class="catalog-card-title">${n.title}</h3>
            <p class="catalog-card-description">${j(n.genre_ids)} | ${n.release_date?n.release_date.split("-")[0]:"Unknown"}</p>
            <p class="rating">⭐ ${n.vote_average.toFixed(1)}</p>
          </div>
        `,o.addEventListener("click",()=>{window.movieModal.show(n.id)}),e.appendChild(o)})}function j(t){const e={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};return!t||!Array.isArray(t)?"":t.map(o=>e[o]||"Unknown").slice(0,2).join(", ")}document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("theme-switch"),e=document.documentElement,n=document.body,o=localStorage.getItem("theme");o?(e.classList.add(o),n.classList.add(o),t.checked=o==="light-theme"):(e.classList.add("dark-theme"),n.classList.add("dark-theme"),t.checked=!1,localStorage.setItem("theme","dark-theme")),requestAnimationFrame(()=>{e.classList.add("theme-loaded")}),t.addEventListener("change",()=>{t.checked?(e.classList.remove("dark-theme"),e.classList.add("light-theme"),n.classList.remove("dark-theme"),n.classList.add("light-theme"),localStorage.setItem("theme","light-theme")):(e.classList.remove("light-theme"),e.classList.add("dark-theme"),n.classList.remove("light-theme"),n.classList.add("dark-theme"),localStorage.setItem("theme","dark-theme"))})});const z="016a30ce49a7789188b6fa9bad9963a6",B="https://api.themoviedb.org/3",$="https://image.tmdb.org/t/p",J={TRENDING_WEEK:"/trending/movie/week",TRENDING_DAY:"/trending/movie/day",POPULAR_MOVIES:"/movie/popular",UPCOMING_MOVIES:"/movie/upcoming",MOVIE_DETAILS:t=>`/movie/${t}`,MOVIE_VIDEOS:t=>`/movie/${t}/videos`,SEARCH_MOVIES:"/search/movie",GENRE_LIST:"/genre/movie/list",IMG_W500:"/w500",IMG_W780:"/w780",IMG_W1280:"/w1280",IMG_ORIGINAL:"/original"};async function G(t,e,n={}){try{return(await R.get(`${t}${e}`,{params:{api_key:z,language:"en-US",page:1,...n}})).data}catch(o){throw console.error("Error fetching data:",o),o}}const Q=document.querySelector("#weekly-movie-card"),X="https://api.themoviedb.org/3",Z="https://image.tmdb.org/t/p",ee="9d898ad8ed36e30a2f478f382f12d8e2",te={TRENDING_WEEK:"/trending/movie/week"},ne={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};function oe(t){return!t||!Array.isArray(t)?"":t.map(n=>ne[n]||"Unknown").slice(0,2).join(", ")}function re(t){return t?t.split("-")[0]:""}async function ae(t,e){const n=`${t}${e}?api_key=${ee}&language=en-US`,o=await fetch(n);if(!o.ok)throw new Error("API fetch failed");return await o.json()}async function se(){try{const e=(await ae(X,te.TRENDING_WEEK)).results.slice(0,3),n=e.map(o=>{const r=oe(o.genre_ids),a=re(o.release_date),d=`${r}${a?` | ${a}`:""}`,i=o.poster_path?`${Z}/w500${o.poster_path}`:"https://via.placeholder.com/500x750?text=No+Image";return`
        <li class="catalog-item" id="weekly-movie-${o.id}">
          <img class="catalog-img" src="${i}" alt="${o.title}">
          <div class="catalog-card-info-container weekly-font">
            <h2 class="weekly-card-title">${o.title}</h2>
            <p class="weekly-card-text">${d}</p>
            <p class="weekly-card-rating">⭐ ${o.vote_average.toFixed(1)}</p>
          </div>
        </li>
      `});Q.innerHTML=n.join(""),e.forEach(o=>{document.getElementById(`weekly-movie-${o.id}`).addEventListener("click",()=>{var a;(a=window.movieModal)==null||a.show(o.id)})})}catch(t){console.error("Hata:",t)}}se();document.addEventListener("DOMContentLoaded",()=>{function e(r){function a(){window.scrollY>100?r.classList.add("visible"):r.classList.remove("visible")}function d(){window.scrollTo({top:0,behavior:"smooth"})}window.addEventListener("scroll",a),r.addEventListener("click",d),a()}function n(){const r=new MutationObserver(()=>{const a=document.querySelector(".scroll-to-top");a&&(r.disconnect(),e(a))});r.observe(document.body,{childList:!0,subtree:!0})}const o=document.querySelector(".scroll-to-top");o?e(o):(console.warn("scroll-to-top butonu bulunamadı. DOM gözlemleniyor..."),n())});document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".modal-details");if(!t)return;const e=t.querySelector(".modal-details__close"),n=t.querySelector(".modal-details__library-btn");let o=null;const r={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};function a(){t.classList.remove("active"),document.body.style.overflow="auto"}e==null||e.addEventListener("click",a),t.addEventListener("click",c=>{c.target===t&&a()}),document.addEventListener("keydown",c=>{c.key==="Escape"&&t.classList.contains("active")&&a()});function d(c){return(JSON.parse(localStorage.getItem("myLibrary"))||[]).some(g=>g.id===c)}function i(c){const l=d(c);n&&(n.textContent=l?"Remove from my library":"Add to my library",n.dataset.action=l?"remove":"add")}function s(c){const l=JSON.parse(localStorage.getItem("myLibrary"))||[],g=l.findIndex(y=>y.id===c.id);c.genres&&!c.genre_ids&&(c.genre_ids=c.genres.map(y=>y.id)),c.genre_ids&&!c.genres&&(c.genres=c.genre_ids.map(y=>({id:y,name:r[y]||"Unknown"}))),g===-1?l.push(c):l.splice(g,1),localStorage.setItem("myLibrary",JSON.stringify(l)),i(c.id)}n==null||n.addEventListener("click",async()=>{if(o){const c=await u(o);s(c)}});async function u(c){const l="016a30ce49a7789188b6fa9bad9963a6",g="https://api.themoviedb.org/3";try{const y=await fetch(`${g}/movie/${c}?api_key=${l}&language=en-US`);if(!y.ok)throw new Error("Failed to fetch movie details");return await y.json()}catch(y){return console.error("Error fetching movie details:",y),null}}async function p(c){const l=await u(c);if(!l)return;o=l.id;const g=t.querySelector(".modal-details__image");g&&(g.src=`https://image.tmdb.org/t/p/w500${l.poster_path}`,g.alt=l.title),t.querySelector(".modal-details__title").textContent=l.title,t.querySelector(".modal-details__vote").textContent=l.vote_average.toFixed(1),t.querySelector(".modal-details__votes").textContent=l.vote_count,t.querySelector(".modal-details__popularity").textContent=l.popularity.toFixed(1),t.querySelector(".modal-details__genre").textContent=l.genres.map(y=>y.name).join(", "),t.querySelector(".modal-details__about-text").textContent=l.overview,i(l.id),t.classList.add("active"),document.body.style.overflow="hidden"}window.movieModal={show:p,close:a}});document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".hero"),e=document.querySelector(".modal-trailer"),n=e.querySelector(".modal-trailer__close"),o=document.querySelector(".hero-button-watchTrailer"),r=e.querySelector(".modal-trailer__video");function a(){const s=r.src;r.src=s}function d(){console.log("Closing modal"),e.classList.remove("active"),document.body.style.overflow="auto",a()}function i(){console.log("Opening modal"),e.classList.add("active"),document.body.style.overflow="hidden",console.log("video api ",t.dataset.movieid),G(B,`/movie/${t.dataset.movieid}/videos`,{page:1}).then(s=>{console.log("VIDEO:",s);const u=s.results.find(p=>p.official===!0&&p.site==="YouTube"&&p.type==="Trailer");if(u){const p=`https://www.youtube.com/embed/${u.key}`;console.log(r.src),r.src=p,console.log(r.src)}else console.log("No official YouTube trailer found.")})}o&&o.addEventListener("click",s=>{console.log("Watch trailer button clicked"),s.preventDefault(),i()}),n&&n.addEventListener("click",s=>{console.log("Close button clicked"),s.preventDefault(),d()}),e&&e.addEventListener("click",s=>{s.target===e&&(console.log("Clicked outside modal"),d())}),document.addEventListener("keydown",s=>{s.key==="Escape"&&e.classList.contains("active")&&(console.log("Escape key pressed"),d())}),window.trailerModal={open:i,close:d}});document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".hero-summary"),e=document.querySelector(".hero-button-moreDetails");document.querySelector(".hero-button-watchTrailer");const n=document.querySelector(".hero"),o=document.querySelector(".hero-image-container"),r=document.querySelector(".hero"),a=document.querySelector(".hero-h1"),d=document.querySelector(".hero-rating-stars");let i=null,s=null,u;function p(m){return m.length>170?m.slice(0,170)+"...":m}function c(m){const f=`${$}/w500${m.backdrop_path}`,w=`${$}/w780${m.backdrop_path}`,S=`${$}/w1280${m.backdrop_path}`;u=document.createElement("img"),u.classList.add("hero-image-itself"),u.alt=m.title,window.innerWidth<=767?u.src=f:window.innerWidth<=1279?u.src=w:u.src=S,o.innerHTML="",o.appendChild(u),r.setAttribute("aria-label",m.title),a.textContent=m.title,t.textContent=p(m.overview),i=m.id}const l="<svg>...FULL STAR...</svg>",g="<svg>...HALF STAR...</svg>",y="<svg>...EMPTY STAR...</svg>";function Y(m,f){if(m<=0||m>=10){console.error("Rating must be between 0 and 10");return}const w=m/2;f.innerHTML="";const S=Math.floor(w),D=w%1>=.5?1:0,K=5-S-D;for(let v=0;v<S;v++){const L=document.createElement("div");L.innerHTML=l,f.appendChild(L.firstElementChild)}if(D){const v=document.createElement("div");v.innerHTML=g,f.appendChild(v.firstElementChild)}for(let v=0;v<K;v++){const L=document.createElement("div");L.innerHTML=y,f.appendChild(L.firstElementChild)}}G(B,J.POPULAR_MOVIES,{page:1}).then(m=>{if(m.results&&m.results.length>0){const f=Math.floor(Math.random()*m.results.length);s=m.results[f],n.dataset.movieid=s.id,Y(s.vote_average,d),c(s)}else console.error("No movies found for hero section.")}),e.addEventListener("click",()=>{if(!window.movieModal||typeof window.movieModal.show!="function"){console.warn("Modal sistemi henüz hazır değil.");return}i&&window.movieModal.show(i)}),window.addEventListener("resize",()=>{u&&s&&c(s)})});const ie="016a30ce49a7789188b6fa9bad9963a6",ce="https://api.themoviedb.org/3",q=document.getElementById("paginationNumbers"),M=document.getElementById("prevButton"),_=document.getElementById("nextButton"),x=document.getElementById("movie-list"),A=document.querySelector(".error-message");let E=1,b=1,le="";const de={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};function me(t){return!t||!Array.isArray(t)?"":t.map(o=>de[o]||"Unknown").slice(0,2).join(", ")}function ue(t){return t?t.split("-")[0]:""}function ye(){H(1),M.addEventListener("click",()=>T(E-1)),_.addEventListener("click",()=>T(E+1))}async function H(t){try{const e=await pe(t,le);ge(e.results),E=e.page,b=e.total_pages,he()}catch(e){console.error("Failed to load movies:",e),F("Failed to load movies. Please try again.")}}async function pe(t,e){try{let n="/trending/movie/week",o={api_key:ie,page:t};return(await R.get(`${ce}${n}`,{params:o})).data}catch(n){throw console.error("Error fetching movies:",n),n}}function ge(t){if(x.innerHTML="",A.style.display="none",!t||t.length===0){F("No movies found.");return}t.forEach(e=>{const n=document.createElement("div");n.className="catalog-item",n.style.backgroundImage=`url(https://image.tmdb.org/t/p/w500${e.poster_path})`;const o=me(e.genre_ids),r=ue(e.release_date),a=`${o}${r?` | ${r}`:""}`;n.innerHTML=`
      <div class="catalog-card-info-container">
        <h3 class="catalog-card-title">${e.title}</h3>
        <p class="catalog-card-description">${a}</p>
        <p class="rating">⭐ ${e.vote_average.toFixed(1)}</p>
      </div>
    `,x.appendChild(n),n.addEventListener("click",()=>{window.movieModal.show(e.id)})})}function he(){if(q.innerHTML="",b<2){M.style.display="none",_.style.display="none";return}else M.style.display="inline-block",_.style.display="inline-block";const t=Math.max(1,E-2),e=Math.min(b,t+5);for(let n=t;n<=e;n++){const o=document.createElement("button");o.textContent=n,o.classList.add("pagination-button"),n===E&&o.classList.add("active"),o.addEventListener("click",()=>T(n)),q.appendChild(o)}M.disabled=E===1,_.disabled=E===b}function F(t){A.textContent=t,A.style.display="block"}async function T(t){t>=1&&t<=b&&await H(t)}const fe="9d898ad8ed36e30a2f478f382f12d8e2",ve="https://api.themoviedb.org/3",Ee="https://image.tmdb.org/t/p",O={TRENDING_WEEK:"/trending/movie/week",SEARCH_MOVIES:"/search/movie",IMG_W500:"/w500"},Le=document.getElementById("search-form"),k=document.getElementById("search-input"),C=document.getElementById("clear-button"),U=document.getElementById("year-select"),N=document.getElementById("movie-list"),h=document.querySelector(".error-message"),be={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};function we(t){return Array.isArray(t)?t.map(n=>be[n]||"Unknown").slice(0,2).join(", "):""}function P(t){return t?t.split("-")[0]:""}function W(t){N.innerHTML="",t.forEach(e=>{const n=document.createElement("div");n.className="catalog-item",n.id=`movie-${e.id}`;const o=e.poster_path?`${Ee}${O.IMG_W500}${e.poster_path}`:"https://via.placeholder.com/500x750?text=No+Image";console.log("Poster URL:",o),n.innerHTML=`
      <img src="${o}" alt="${e.title}" class="catalog-img" />
      <div class="catalog-card-info-container">
        <h3 class="catalog-card-title">${e.title}</h3>
        <p class="catalog-card-description">${we(e.genre_ids)}${P(e.release_date)?` | ${P(e.release_date)}`:""}</p>
        <p class="rating">⭐ ${e.vote_average.toFixed(1)}</p>
      </div>
    `,n.addEventListener("click",()=>{var r;(r=window.movieModal)==null||r.show(e.id)}),N.appendChild(n)})}async function V(t,e={}){const n=new URL(ve+t);n.searchParams.append("api_key",fe),n.searchParams.append("language","en-US"),n.searchParams.append("page",1),Object.entries(e).forEach(([r,a])=>n.searchParams.append(r,a));const o=await fetch(n);if(!o.ok)throw new Error("API request failed");return o.json()}async function Se(){var t;try{const e=await V(O.TRENDING_WEEK);((t=e.results)==null?void 0:t.length)>0?(W(e.results),h.style.display="none"):(h.textContent="No trending movies found.",h.style.display="block")}catch(e){console.error(e),h.textContent="Failed to load trending movies.",h.style.display="block"}}function Me(){const t=new Date().getFullYear();for(let e=t;e>=1960;e--){const n=document.createElement("option");n.value=e,n.textContent=e,U.appendChild(n)}}k.addEventListener("input",()=>{C.style.display=k.value.trim()?"inline-block":"none"});C.addEventListener("click",()=>{k.value="",C.style.display="none"});Le.addEventListener("submit",async t=>{var o;t.preventDefault();const e=k.value.trim(),n=U.value;if(e)try{const r=await V(O.SEARCH_MOVIES,{query:e,primary_release_year:n});((o=r.results)==null?void 0:o.length)>0?(W(r.results),h.style.display="none"):(N.innerHTML="",h.textContent=`  OOPS!        We are unable to load trending movies. Please try again later.
`,h.style.display="block")}catch(r){console.error(r),h.textContent="Search failed. Please try again.",h.style.display="block"}});document.addEventListener("DOMContentLoaded",()=>{ye(),Me(),Se()});
//# sourceMappingURL=main-DtwUsTf6.js.map
